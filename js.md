# js相关



## vue中nexTick原理

Dom操作到底是同步，还是异步？
这里出现一个说不清道不明的疑问，Dom操作到底是同步操作还是异步操作？

如果是同步操作，那vue的nextTick方法是做什么用的？不就是在Dom更新完之后的回调方法吗？

如果是异步操作，那在剧烈操作Dom后面的代码，为什么会被阻塞？而且代码看上去，也的确是按顺序执行的？

**这里直接说明：js里面的Dom操作代码，是同步执行，但浏览器进行的Dom渲染，是异步操作。浏览器渲染Dom和执行js，同时只能二选一，渲染一次Dom的时机是，当前宏任务和小尾巴微任务执行完，下一个宏任务开始前**



vue的nextTick方法，则是使用H5的Api---MutationObserver，监听浏览器将Dom渲染完成的时机。
若浏览器不支持此方法，则会使用setTimeout，把nextTick回调函数的执行时机，作为一个宏任务；

上面也说了，浏览器渲染一次Dom，是下一个宏任务开始前，这样使用了setTimeout，保证了Dom确实渲染完成。

这里也需要稍作提醒，js操作Dom是同步的，但操作Dom，毕竟超出了js本身语言的Api，每操作一次Dom，都需要
消耗一定的性能，所以，在适合的情况下，最好先把要修改的Dom的内容，以字符串或者虚拟Dom的形式拼接好，
然后操作一次Dom，把组装好的Dom字符串或虚拟Dom，一次性的塞进HTML页面的真实Dom中。





## 设计模式

原文：[TypeScript 设计模式与重构技巧 - 知乎 (zhihu.com)](https://www.zhihu.com/column/c_1250717076005834752)



### 开篇

面向对象的核心就是类和对象，在正式进入工厂模式之前，我们不妨先来认识下三大类设计模式。

- 创建型：简单工厂模式、工厂方法、抽象工厂模式、建造者模式、单例模式
- 结构型：适配器模式、桥接模式、装饰模式、外观模式、享元模式、代理模式
- 行为型：命令模式、中介者模式、观察者模式、状态模式、策略模式

而这三大类设计模式也分别针对三类问题：

- 创建型：如何创建对象
- 结构型：如何将零散的类和对象组合成为更强大的结构
- 行为型：类与对象之间的行为分配



### 工厂模式

[TypeScript 设计模式与重构技巧 · 工厂模式 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/120071984)

